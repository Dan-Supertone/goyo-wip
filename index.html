<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Supertone</title>
<!-- Styles & Scripts -->
<link rel="stylesheet" href="./styles/main.css">
<!-- jQuery -->
<script src="//code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

<button class="play">Play</button>
<button class="pause">Pause</button>
<button class="only-voice">Only Voice</button>
<button class="only-accomp">Only Accomp</button>
<button class="both">Both</button>
<button class="change">Change Audio Source</button>

<h1 class="h1"></h1>

</body>
<script>
// 오디오 생성
const audioVoiceA = new Audio();
audioVoiceA.src = "./audio/audio-test-voice.mp3";

const audioAccompA = new Audio();
audioAccompA.src = "./audio/audio-test-accomp.mp3";

const audioVoiceB = new Audio();
audioVoiceB.src = "./audio/audio-2-voice.mp3";

const audioAccompB = new Audio();
audioAccompB.src = "./audio/audio-2-accomp.mp3";

// 오디오 세트
const audioPack = {
  0: [audioVoiceA, audioAccompA],
  1: [audioVoiceB, audioAccompB]
};

// 오디오 세트 자식 갯수
const audioCount = Object.keys(audioPack).length - 1;

let nowPlaying = 0;
$('h1').html(nowPlaying);





$('button.play').click( function () {
  audioPack[nowPlaying][0].play();
  audioPack[nowPlaying][1].play();
});

$('button.pause').click( function () {
  pauseAll();
});

$('button.only-voice').click( function () {
  audioPack[nowPlaying][0].volume = 1;
  audioPack[nowPlaying][1].volume= 0;
});

$('button.only-accomp').click( function () {
  audioPack[nowPlaying][0].volume = 0;
  audioPack[nowPlaying][1].volume = 1;
});

$('button.both').click( function () {
  audioPack[nowPlaying][0].volume = 1;
  audioPack[nowPlaying][1].volume = 1;
});

$('button.change').click( function () {
  if (nowPlaying < audioCount) {
    pauseAll();
    nowPlaying++;
    $('h1').html(nowPlaying);
  };
});





// 모든 오디오 정지 & 리셋
function pauseAll() {
  for (let i in audioPack) {
    audioPack[i][0].pause();
    audioPack[i][1].pause();
    audioPack[i][0].currentTime = 0;
    audioPack[i][1].currentTime = 0;
  };
};
</script>
</html>