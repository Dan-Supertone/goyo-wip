<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Supertone</title>
<!-- Styles & Scripts -->
<link rel="stylesheet" href="./styles/main.css">
<!-- jQuery -->
<script src="//code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

<div class="goyo-wrap">
  <div class="goyo-header">
    <button class="play">Play</button>
    <button class="only-voice">Only Voice</button>
    <button class="only-accomp">Only Accomp</button>
    <button class="both">Both</button>
    <button class="change">Change Audio Source</button>
  </div>
</div>

<!--
<h1 class="h1"></h1>
-->

</body>
<script>
const audioVoiceA = new Audio();
audioVoiceA.src = "./audio/audio-test-voice.mp3";

const audioAccompA = new Audio();
audioAccompA.src = "./audio/audio-test-accomp.mp3";

const audioVoiceB = new Audio();
audioVoiceB.src = "./audio/audio-2-voice.mp3";

const audioAccompB = new Audio();
audioAccompB.src = "./audio/audio-2-accomp.mp3";

const audioPack = {
  0: [audioVoiceA, audioAccompA],
  1: [audioVoiceB, audioAccompB]
};

const audioCount = Object.keys(audioPack).length - 1;
const buttonPlay = $('button.play');
let isPlaying = false;
let nowPlaying = 0;
$('h1').html(nowPlaying);

//

buttonPlay.click( function () {
  let $this = $(this);
  if (isPlaying == false) {
    play();
    isPlaying = true;
    $this.html('Pause');
    $this.addClass('paused');
  } else {
    pause();
    isPlaying = false;
    $this.html('Play');
    $this.removeClass('paused');
  };
});

$('.only-voice').click( function () {
  audioPack[nowPlaying][0].volume = 1;
  audioPack[nowPlaying][1].volume= 0;
});

$('.only-accomp').click( function () {
  audioPack[nowPlaying][0].volume = 0;
  audioPack[nowPlaying][1].volume = 1;
});

$('.both').click( function () {
  audioPack[nowPlaying][0].volume = 1;
  audioPack[nowPlaying][1].volume = 1;
});

$('.change').click( function () {
  pauseAll();
  if (nowPlaying < audioCount) {
    nowPlaying++;
  } else {
    nowPlaying = 0;
  };
  $('h1').html(nowPlaying);
});

//

function play() {
  audioPack[nowPlaying][0].play();
  audioPack[nowPlaying][1].play();
};

function pause() {
  audioPack[nowPlaying][0].pause();
  audioPack[nowPlaying][1].pause();
};

function pauseAll() {
  for (let i in audioPack) {
    audioPack[i][0].pause();
    audioPack[i][1].pause();
    audioPack[i][0].currentTime = 0;
    audioPack[i][1].currentTime = 0;
  };
  isPlaying = false;
  buttonPlay.html('Play');
  buttonPlay.removeClass('paused');
};
</script>
</html>